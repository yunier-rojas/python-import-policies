release:
  image: node:bookworm
  stage: release
  variables:
    GITLAB_TOKEN: ${{ GITLAB_TOKEN }}
    PYPI_TOKEN: ${{ PYPI_TOKEN }}
  before_script:
    - npm install
    - apt-get update && apt-get install -y python3-pip python3-venv
    - git remote set-url --push origin https://gitlab-ci-token:${GITLAB_TOKEN}@gitlab.com/$CI_PROJECT_PATH.git
    - python3 -m venv .venv
    - source .venv/bin/activate
  script:
    - npx semantic-release
